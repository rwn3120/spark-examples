{"paragraphs":[{"text":"%md # Wordcount streaming demo\n\nInstructions:\n1) start `netcat server` (!)\n2) set correct `host address` in `Start streaming` paragraph\n3) start query (run `Start streaming` paragraph)\n4) run SQL paragraphs\n5) publish some text via netcat server\n6) rerun SQL paragraphs\n7) stop query (run `Stop streaming` paragraph)\n","user":"anonymous","dateUpdated":"2018-10-31T11:54:10+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Wordcount streaming demo</h1>\n<p>Instructions:<br/>1) start <code>netcat server</code> (!)<br/>2) set correct <code>host address</code> in <code>Start streaming</code> paragraph<br/>3) start query (run <code>Start streaming</code> paragraph)<br/>4) run SQL paragraphs<br/>5) publish some text via netcat server<br/>6) rerun SQL paragraphs<br/>7) stop query (run <code>Stop streaming</code> paragraph)</p>\n</div>"}]},"apps":[],"jobName":"paragraph_1540985992934_-1708437287","id":"20181030-111213_1493553682","dateCreated":"2018-10-31T11:39:52+0000","dateStarted":"2018-10-31T11:54:10+0000","dateFinished":"2018-10-31T11:54:10+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:25388"},{"title":"Start streaming","text":"%spark\nimport org.apache.spark.streaming._\nimport org.apache.spark.sql.streaming._\n\n// open socket stream (connects to your netcat server)\nval socketStreamDf = spark.\n  readStream.\n  format(\"socket\").\n  option(\"host\", \"192.168.57.3\").\n  option(\"port\", 12345).\n  load\n\n// adds implicit type conversions\nimport spark.implicits._\n\n// convert stream to text dataframe\nval textDf = socketStreamDf.as[String]\n\nval wordsDf = textDf.\n    flatMap(value => value.split(\" \")).\n    filter(_.nonEmpty)\n\nval countDf = wordsDf.groupBy(\"value\").count()\n\nval query = countDf.writeStream.\n    format(\"memory\").\n    queryName(\"wordcount\").\n    outputMode(OutputMode.Complete()).\n    start()\n","user":"anonymous","dateUpdated":"2018-10-31T11:51:45+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1540985992939_-1710361031","id":"20181029-214402_2117766316","dateCreated":"2018-10-31T11:39:52+0000","dateStarted":"2018-10-31T11:51:45+0000","dateFinished":"2018-10-31T11:51:50+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:25389"},{"text":"%sql select value, count from wordcount ORDER BY count DESC LIMIT 10\n","user":"anonymous","dateUpdated":"2018-10-31T11:52:17+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false},"colWidth":7,"editorMode":"ace/mode/sql","editorHide":false,"results":{"0":{"graph":{"mode":"multiBarChart","height":304,"optionOpen":false},"helium":{}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1540985992939_-1710361031","id":"20181030-110916_1510165702","dateCreated":"2018-10-31T11:39:52+0000","dateStarted":"2018-10-31T11:52:01+0000","dateFinished":"2018-10-31T11:52:02+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:25390"},{"text":"%sql \nselect value, count from wordcount ORDER BY count DESC LIMIT 10","user":"anonymous","dateUpdated":"2018-10-31T11:59:16+0000","config":{"lineNumbers":false,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":5,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":false,"results":{"0":{"graph":{"mode":"pieChart","height":276,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"value":"string","count":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false},"stackedAreaChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"},"multiBarChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"}},"commonSetting":{},"keys":[{"name":"value","index":0,"aggr":"sum"}],"groups":[],"values":[{"name":"count","index":1,"aggr":"sum"}]},"helium":{}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1540985992939_-1710361031","id":"20181029-220011_497590678","dateCreated":"2018-10-31T11:39:52+0000","dateStarted":"2018-10-31T11:53:27+0000","dateFinished":"2018-10-31T11:53:27+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:25391"},{"title":"Is query alive?","text":"%spark query.isActive\n","dateUpdated":"2018-10-31T11:39:52+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1540985992939_-1710361031","id":"20181030-061730_1829559647","dateCreated":"2018-10-31T11:39:52+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:25392"},{"title":"Stop query","text":"%spark\nquery.stop()\n","user":"anonymous","dateUpdated":"2018-10-31T11:51:41+0000","config":{"editorSetting":{"language":"scala"},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1540985992940_-1712284776","id":"20181030-063303_2087051763","dateCreated":"2018-10-31T11:39:52+0000","dateStarted":"2018-10-31T11:51:41+0000","dateFinished":"2018-10-31T11:51:42+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:25393"},{"text":"%spark\n","dateUpdated":"2018-10-31T11:39:52+0000","config":{"colWidth":12,"editorMode":"ace/mode/scala","results":{},"enabled":true,"editorSetting":{"language":"scala"}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1540985992940_-1712284776","id":"20181030-072209_1878640414","dateCreated":"2018-10-31T11:39:52+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:25394"}],"name":"streaming-wordcount","id":"2DUQ3VXY2","angularObjects":{"2DT7WSABA:shared_process":[],"2DVHPJAXA:shared_process":[],"2DT88ZBHB:shared_process":[],"2DVUQ8V4Y:shared_process":[],"2DUZEW5VN:shared_process":[],"2DU96C6ZG:shared_process":[],"2DWF1Q933:shared_process":[],"2DWE73REA:shared_process":[],"2DW1YQAFV:shared_process":[],"2DWYJX45Z:shared_process":[],"2DW66Y2F4:shared_process":[],"2DW6HVT7P:shared_process":[],"2DTR1MZJ9:shared_process":[],"2DUJQJPYR:shared_process":[],"2DU163718:shared_process":[],"2DU88CBNC:shared_process":[],"2DWM3ZJHE:shared_process":[],"2DU7K7PYQ:shared_process":[],"2DT6PM8TJ:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}