{"paragraphs":[{"text":"%md # Wordcount streaming demo\n\nInstructions:\n1) start `netcat server` (!)\n2) set correct `host address` in `Start streaming` paragraph\n3) start query (run `Start streaming` paragraph)\n4) run SQL paragraphs\n5) publish some text via netcat server\n6) rerun SQL paragraphs\n7) stop query (run `Stop streaming` paragraph)\n","user":"anonymous","dateUpdated":"2018-10-30T11:28:24+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true},"editorMode":"ace/mode/markdown","editorHide":false,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Wordcount streaming demo</h1>\n<p>Instructions:<br/>1) start <code>netcat server</code> (!)<br/>2) set correct <code>host address</code> in <code>Start streaming</code> paragraph<br/>3) start query (run <code>Start streaming</code> paragraph)<br/>4) run SQL paragraphs<br/>5) publish some text via netcat server<br/>6) rerun SQL paragraphs<br/>7) stop query (run <code>Stop streaming</code> paragraph)</p>\n</div>"}]},"apps":[],"jobName":"paragraph_1540897933300_-1866355675","id":"20181030-111213_1493553682","dateCreated":"2018-10-30T11:12:13+0000","dateStarted":"2018-10-30T11:26:43+0000","dateFinished":"2018-10-30T11:26:43+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:7081"},{"title":"Start streaming","text":"%spark\nimport org.apache.spark.streaming._\nimport org.apache.spark.sql.streaming._\n\n// open socket stream (connects to your netcat server)\nval socketStreamDf = spark.\n  readStream.\n  format(\"socket\").\n  option(\"host\", \"192.168.57.3\").\n  option(\"port\", 12345).\n  load\n\n// adds implicit type conversions\nimport spark.implicits._\n\n// convert stream to text dataframe\nval textDf = socketStreamDf.as[String]\n\nval wordsDf = textDf.\n    flatMap(value => value.split(\" \")).\n    filter(_.nonEmpty)\n\nval countDf = wordsDf.groupBy(\"value\").count()\n\nval query = countDf.writeStream.\n    format(\"memory\").\n    queryName(\"wordcount\").\n    outputMode(OutputMode.Complete()).\n    start()\n","user":"anonymous","dateUpdated":"2018-10-30T11:25:09+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala","title":true,"editorHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1540849442162_-129749647","id":"20181029-214402_2117766316","dateCreated":"2018-10-29T21:44:02+0000","dateStarted":"2018-10-30T11:20:29+0000","dateFinished":"2018-10-30T11:20:35+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:7082"},{"text":"%sql select value, count from wordcount ORDER BY count DESC LIMIT 10\n","user":"anonymous","dateUpdated":"2018-10-30T11:23:09+0000","config":{"colWidth":7,"enabled":true,"results":{"0":{"graph":{"mode":"multiBarChart","height":304,"optionOpen":false},"helium":{}}},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/sql","editorHide":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1540897756273_-728312757","id":"20181030-110916_1510165702","dateCreated":"2018-10-30T11:09:16+0000","dateStarted":"2018-10-30T11:23:09+0000","dateFinished":"2018-10-30T11:23:09+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:7083"},{"text":"%sql \nselect value, count from wordcount ORDER BY count DESC LIMIT 10\n","user":"anonymous","dateUpdated":"2018-10-30T11:20:51+0000","config":{"colWidth":5,"fontSize":9,"enabled":true,"results":{"0":{"graph":{"mode":"pieChart","height":304,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"value":"string","count":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false},"stackedAreaChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"},"multiBarChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"}},"commonSetting":{},"keys":[{"name":"value","index":0,"aggr":"sum"}],"groups":[],"values":[{"name":"count","index":1,"aggr":"sum"}]},"helium":{}}},"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/sql","lineNumbers":false,"editorHide":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1540850411092_-2124370230","id":"20181029-220011_497590678","dateCreated":"2018-10-29T22:00:11+0000","dateStarted":"2018-10-30T11:20:51+0000","dateFinished":"2018-10-30T11:20:53+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:7084"},{"title":"Is query alive?","text":"%spark query.isActive\n","user":"anonymous","dateUpdated":"2018-10-30T11:17:31+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala","editorHide":true,"title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"res4: Boolean = true\n"}]},"apps":[],"jobName":"paragraph_1540880250715_-2047810037","id":"20181030-061730_1829559647","dateCreated":"2018-10-30T06:17:30+0000","dateStarted":"2018-10-30T11:11:48+0000","dateFinished":"2018-10-30T11:11:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:7085"},{"title":"Stop query","text":"%spark\nquery.stop()\n","user":"anonymous","dateUpdated":"2018-10-30T11:25:53+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1540881183644_-255111500","id":"20181030-063303_2087051763","dateCreated":"2018-10-30T06:33:03+0000","dateStarted":"2018-10-30T11:25:50+0000","dateFinished":"2018-10-30T11:25:51+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:7086"},{"text":"%spark\n","user":"anonymous","dateUpdated":"2018-10-30T07:22:09+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala"},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1540884129803_-2098615200","id":"20181030-072209_1878640414","dateCreated":"2018-10-30T07:22:09+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:7087"}],"name":"streaming-wordcount","id":"2DWRBUAAK","angularObjects":{"2DWBR4VCA:shared_process":[],"2DW2BS79V:shared_process":[],"2DU4TZ7XR:shared_process":[],"2DVQTZE24:shared_process":[],"2DVEAQVQC:shared_process":[],"2DW8BWFY5:shared_process":[],"2DUZUP2P4:shared_process":[],"2DUPANRAR:shared_process":[],"2DWNQ7UH7:shared_process":[],"2DTBXU8J8:shared_process":[],"2DU3VBSZH:shared_process":[],"2DTXHJ2HA:shared_process":[],"2DVU8AEWS:shared_process":[],"2DUSJ26M4:shared_process":[],"2DTW7U68Z:shared_process":[],"2DUGP5BXF:shared_process":[],"2DT7F45DX:shared_process":[],"2DWE5G4TC:shared_process":[],"2DVXKH843:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}