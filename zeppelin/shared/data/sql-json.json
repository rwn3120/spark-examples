{"paragraphs":[{"title":"Instruction","text":"%md \n1. run `ALL` paragraphs","user":"anonymous","dateUpdated":"2018-11-01T11:31:36+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":{},"enabled":true,"title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1540985948780_1684465693","id":"20181030-122948_314706387","dateCreated":"2018-10-31T11:39:08+0000","dateStarted":"2018-11-01T11:31:36+0000","dateFinished":"2018-11-01T11:31:36+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:5361","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<ol>\n  <li>run <code>ALL</code> paragraphs</li>\n</ol>\n</div>"}]}},{"title":"Convert remote JSON to Table","text":"%spark\nimport org.apache.commons.io.IOUtils\nimport org.apache.commons.lang.time.DateUtils\nimport java.net.URL\nimport java.nio.charset.Charset\nimport scala.collection.mutable\nimport java.sql.Timestamp\nimport java.util.{Calendar, Date}\nimport org.apache.spark.sql.types._\n\n// download json\nval json = IOUtils.toString(\n      new URL(\"https://store.steampowered.com/stats/userdata.json\"),\n      Charset.forName(\"utf8\"))\n\n\n// load json\nval jsonDF = sqlContext.read.json(sc.parallelize(Seq(json)))\n\n// parse data from json\nval flattenedDF = jsonDF.withColumn(\"data\", explode($\"data\"))\n\n// parse date & users column from json\nval usersDF = flattenedDF.map(row => {\n    val wrappedArray = row.getAs[mutable.WrappedArray[Long]](\"data\")\n    (new Timestamp(wrappedArray(0)), wrappedArray(1))\n}).toDF(\"date\", \"users\")\n\n// create view\nusersDF.toDF(\"date\", \"count\").createOrReplaceTempView(\"users\")","user":"anonymous","dateUpdated":"2018-11-01T08:48:11+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{},"enabled":true,"title":true,"editorHide":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1540985948791_1694084416","id":"20181029-211733_1666090323","dateCreated":"2018-10-31T11:39:08+0000","dateStarted":"2018-11-01T08:47:34+0000","dateFinished":"2018-11-01T08:47:44+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5362"},{"title":"Last 72 hours","text":"%sql\nSELECT date, count FROM users SORT BY date","user":"anonymous","dateUpdated":"2018-11-01T08:47:53+0000","config":{"editorSetting":{"language":"text","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":8,"editorMode":"ace/mode/text","fontSize":9,"results":{"0":{"graph":{"mode":"stackedAreaChart","height":234,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"date":"string","users":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false},"multiBarChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"},"lineChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"},"stackedAreaChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"}},"commonSetting":{},"keys":[{"name":"date","index":0,"aggr":"sum"}],"groups":[],"values":[{"name":"count","index":1,"aggr":"sum"}]},"helium":{}}},"enabled":true,"editorHide":true,"title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1540985948792_1692160671","id":"20181029-211808_1706492508","dateCreated":"2018-10-31T11:39:08+0000","dateStarted":"2018-11-01T08:47:38+0000","dateFinished":"2018-11-01T08:47:46+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5363"},{"text":"%sql\nSELECT MAX(count) AS max, MIN(count) AS min FROM users","user":"anonymous","dateUpdated":"2018-11-01T08:47:54+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":4,"editorMode":"ace/mode/sql","fontSize":9,"results":{"0":{"graph":{"mode":"multiBarChart","height":220,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"date":"string","users":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false},"multiBarChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"},"lineChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"},"pieChart":{}},"commonSetting":{},"keys":[{"name":"max","index":0,"aggr":"sum"},{"name":"min","index":1,"aggr":"sum"}],"groups":[],"values":[{"name":"min","index":1,"aggr":"sum"},{"name":"max","index":0,"aggr":"sum"}]},"helium":{}}},"enabled":true,"editorHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1540985948792_1692160671","id":"20181029-213932_759363645","dateCreated":"2018-10-31T11:39:08+0000","dateStarted":"2018-11-01T08:47:54+0000","dateFinished":"2018-11-01T08:47:55+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5364"},{"text":"%sql\n","dateUpdated":"2018-10-31T11:39:08+0000","config":{"colWidth":12,"editorMode":"ace/mode/sql","results":{},"enabled":true,"editorSetting":{"language":"sql"}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1540985948793_1691775922","id":"20181029-215259_1931318843","dateCreated":"2018-10-31T11:39:08+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5365"}],"name":"sql-json","id":"2DUVQH5B1","angularObjects":{"2DW4GMKV4:shared_process":[],"2DVAY6HJA:shared_process":[],"2DWWWMYYD:shared_process":[],"2DUMGC4N6:shared_process":[],"2DVPRCRF8:shared_process":[],"2DUG1UCGJ:shared_process":[],"2DVV9DBRG:shared_process":[],"2DVEGK277:shared_process":[],"2DU2193PE:shared_process":[],"2DV14XFAE:shared_process":[],"2DWK7WUAU:shared_process":[],"2DWM7GEKN:shared_process":[],"2DU6DRYSE:shared_process":[],"2DU899EQ7:shared_process":[],"2DTUQGZWY:shared_process":[],"2DW1HP3HX:shared_process":[],"2DVAZT57G:shared_process":[],"2DWFKSHSZ:shared_process":[],"2DWDM98TX:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}